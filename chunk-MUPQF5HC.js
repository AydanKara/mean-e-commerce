import{a as A}from"./chunk-43R5CTJ3.js";import"./chunk-7CMIEGEP.js";import"./chunk-BRGKWRVN.js";import"./chunk-T3Q3DASN.js";import"./chunk-QI2QTTT6.js";import"./chunk-MAQY66WU.js";import{m as S,n as C,q as U}from"./chunk-HXLDE4VL.js";import{Bb as d,Db as l,Nb as i,Ob as r,Sb as b,Xb as g,Zb as m,db as o,ia as x,jc as s,kc as c,mb as v,ra as _,sa as f}from"./chunk-XVGCL5GT.js";function E(n,t){n&1&&(i(0,"div",3)(1,"span",4),s(2,"Loading..."),r()())}function I(n,t){if(n&1){let e=b();i(0,"button",9),g("click",function(){_(e);let p=m().$implicit,u=m(2);return f(u.toggleAdminStatus(p))}),s(1," Make Admin "),r()}}function y(n,t){if(n&1){let e=b();i(0,"button",10),g("click",function(){_(e);let p=m().$implicit,u=m(2);return f(u.toggleAdminStatus(p))}),s(1," Revoke Admin "),r()}}function k(n,t){if(n&1&&(i(0,"tr")(1,"td"),s(2),r(),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),d(8,I,2,0,"button",7)(9,y,2,0,"button",8),r()()),n&2){let e=t.$implicit;o(2),c(e.fullName),o(2),c(e.email),o(2),c(e.isAdmin?"Admin":"User"),o(2),l("ngIf",!e.isAdmin),o(),l("ngIf",e.isAdmin)}}function w(n,t){if(n&1&&(i(0,"table",5)(1,"thead")(2,"tr")(3,"th"),s(4,"Name"),r(),i(5,"th"),s(6,"Email"),r(),i(7,"th"),s(8,"Admin Status"),r(),i(9,"th"),s(10,"Actions"),r()()(),i(11,"tbody"),d(12,k,10,5,"tr",6),r()()),n&2){let e=m();o(12),l("ngForOf",e.users)}}var h=class n{adminService=x(A);users=[];loading=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.adminService.getAllUsers().subscribe({next:t=>{this.users=t,this.loading=!1},error:t=>{console.error("Error fetching users:",t),this.loading=!1}})}toggleAdminStatus(t){let e=!t.isAdmin;this.adminService.updateUserAdminStatus(t._id,e).subscribe({next:a=>{t.isAdmin=a.isAdmin},error:a=>{console.error("Error updating admin status:",a)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-users"]],decls:4,vars:2,consts:[[1,"pt-4","mb-4","fs-5"],["class","spinner-border text-primary","role","status",4,"ngIf"],["class","table",4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table"],[4,"ngFor","ngForOf"],["class","btn btn-dark w-100",3,"click",4,"ngIf"],["class","btn btn-outline-secondary w-100",3,"click",4,"ngIf"],[1,"btn","btn-dark","w-100",3,"click"],[1,"btn","btn-outline-secondary","w-100",3,"click"]],template:function(e,a){e&1&&(i(0,"h2",0),s(1,"Users List"),r(),d(2,E,3,0,"div",1)(3,w,13,1,"table",2)),e&2&&(o(2),l("ngIf",a.loading),o(),l("ngIf",!a.loading))},dependencies:[U,S,C],encapsulation:2})};export{h as UsersComponent};
