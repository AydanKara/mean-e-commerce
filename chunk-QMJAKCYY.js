import{a as R}from"./chunk-2BYQFWPK.js";import{a as q}from"./chunk-YZLR3JRR.js";import{a as j,b as U}from"./chunk-N2RWQAKW.js";import{d as z,g as L,i as V}from"./chunk-BWLJFYGV.js";import{a as $}from"./chunk-XVTVAFZB.js";import"./chunk-JR3KB4OF.js";import"./chunk-VWCMHKBA.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import{m as F,n as B,q as N,r as A}from"./chunk-SPT54WKC.js";import{$a as M,Cb as g,Db as P,Eb as p,Gb as E,Ob as i,Pb as n,Qb as a,Rb as k,Sb as D,Tb as O,X as I,Yb as C,_b as m,bc as _,cb as r,ia as x,kc as t,lb as w,lc as c,mc as d,nc as v,ra as h,sa as S,tc as y,vc as u,wc as f,xc as T}from"./chunk-IB35DNSN.js";var G=o=>["/product",o];function K(o,l){o&1&&(i(0,"div",2)(1,"span",3),t(2,"Loading..."),n()())}function Q(o,l){if(o&1){let e=O();i(0,"button",35),C("click",function(){let b=h(e).$implicit,J=m(3);return S(J.updateOrderStatus(b))}),t(1),n()}if(o&2){let e=l.$implicit,s=m(3);E("active",e===(s.order==null?null:s.order.orderStatus)),r(),d(" ",e," ")}}function W(o,l){if(o&1&&(i(0,"div",33),g(1,Q,2,3,"button",34),n()),o&2){let e=m(2);r(),p("ngForOf",e.statusOptions)}}function X(o,l){if(o&1&&(i(0,"li",36)(1,"div",37)(2,"div",38)(3,"a",39),a(4,"img",40),n()(),i(5,"div",41)(6,"p",42)(7,"a",43),t(8),n(),a(9,"br"),i(10,"span",44),t(11),u(12,"currency"),n()()()()()),o&2){let e=l.$implicit;r(3),p("routerLink",y(9,G,e.product._id)),r(),_("src",e.product.images[0],M),_("alt",e.product.name),r(3),p("routerLink",y(11,G,e.product._id)),r(),v("",e.product.name," x ",e.quantity,""),r(3),c(f(12,7,e.price))}}function Y(o,l){if(o&1){let e=O();k(0),i(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"h6",10),t(8,"Order No:"),n(),i(9,"p",11),t(10),n()(),i(11,"div",9)(12,"h6",10),t(13,"Shipped date:"),n(),i(14,"p",12)(15,"time"),t(16),u(17,"formatDate"),n()()(),i(18,"div",9)(19,"h6",10),t(20,"Order status:"),n(),i(21,"p",13),t(22),n(),i(23,"div",14)(24,"button",15),C("click",function(){h(e);let b=m();return S(b.toggleStatusDropdown())}),t(25," Change Status "),n()(),g(26,W,2,1,"div",16),n(),i(27,"div",9)(28,"h6",10),t(29,"Order Amount:"),n(),i(30,"p",13),t(31),u(32,"currency"),n()()()()()(),i(33,"div",17)(34,"h5",18),t(35),n(),a(36,"hr",19),i(37,"ul",20),g(38,X,13,13,"li",21),n()()(),i(39,"div",4)(40,"div",22)(41,"h5",18),t(42,"Order Total"),n(),i(43,"ul",23)(44,"li",24)(45,"span"),t(46,"Subtotal"),n(),i(47,"span",25),t(48),u(49,"currency"),n()(),i(50,"li",24)(51,"span"),t(52,"Tax"),n(),i(53,"span",25),t(54,"$0.00"),n()(),i(55,"li",24)(56,"span"),t(57,"Shipping"),n(),i(58,"span",25),t(59,"$0.00"),n()(),i(60,"li",26)(61,"span"),t(62,"Total"),n(),i(63,"span",25),t(64),u(65,"currency"),n()()()()(),i(66,"div",27)(67,"div",22)(68,"h5",18),t(69,"Billing & Shipping Details"),n(),i(70,"div",8)(71,"div",28)(72,"p",29),t(73,"Billing Address:"),n(),i(74,"p",30),t(75),a(76,"br"),t(77),a(78,"br"),t(79),a(80,"br"),t(81),n()(),i(82,"div",28)(83,"p",29),t(84,"Shipping Address:"),n(),i(85,"p",30),t(86),a(87,"br"),t(88),a(89,"br"),t(90),a(91,"br"),t(92),n()(),i(93,"div",31)(94,"div")(95,"p",29),t(96,"Payment Method:"),n(),i(97,"p",32),t(98),n()(),i(99,"div")(100,"p",29),t(101,"Payment Status:"),n(),i(102,"p",32),t(103),n()()()()()(),D()}if(o&2){let e=m();r(9),_("matTooltip",e.order==null?null:e.order._id),r(),d(" ...",e.order==null||e.order._id==null?null:e.order._id.slice(-5)," "),r(5),P("datetime",e.order==null?null:e.order.createdAt),r(),d(" ",T(17,23,e.order==null?null:e.order.createdAt,"dd MMM, yyyy","en-US")," "),r(6),c(e.order==null?null:e.order.orderStatus),r(4),p("ngIf",e.showStatusDropdown),r(5),d(" ",f(32,27,e.order==null?null:e.order.totalPrice)," "),r(4),d("Order Items (",e.order==null||e.order.orderItems==null?null:e.order.orderItems.length,")"),r(3),p("ngForOf",e.order==null?null:e.order.orderItems),r(10),c(f(49,29,e.order==null?null:e.order.totalPrice)),r(16),c(f(65,31,e.order==null?null:e.order.totalPrice)),r(11),d(" ",e.order==null||e.order.user==null?null:e.order.user.fullName,", "),r(2),d(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.address,", "),r(2),v(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.city,", ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.zipCode,", "),r(2),d(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.country," "),r(5),d(" ",e.order==null||e.order.user==null?null:e.order.user.fullName,", "),r(2),d(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.address,", "),r(2),v(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.city,", ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.zipCode,", "),r(2),d(" ",e.order==null||e.order.shippingInfo==null?null:e.order.shippingInfo.country," "),r(6),c(e.order==null?null:e.order.paymentMethod),r(5),c(e.order==null?null:e.order.paymentStatus)}}var H=class o{activateRoute=x(z);orderService=x(R);adminService=x($);order=null;loading=!1;showStatusDropdown=!1;statusOptions=["Processing","Shipped","Delivered","Cancelled"];ngOnInit(){this.loadOrder()}loadOrder(){this.loading=!0,this.activateRoute.paramMap.pipe(I(l=>{let e=l.get("id");return e?this.orderService.getOrderById(e):[]})).subscribe({next:l=>{this.loading=!1,this.order=l,console.log(l.user.fullName)},error:l=>{this.loading=!1,console.error(l)}})}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown}updateOrderStatus(l){this.order?.orderStatus!==l&&this.adminService.updateOrderStatus(this.order?._id,l).subscribe({next:e=>{this.order.orderStatus=e.orderStatus,this.showStatusDropdown=!1,this.loadOrder()},error:e=>{console.error("Failed to update status",e)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["app-order-details"]],decls:2,vars:2,consts:[["class","spinner-border text-primary d-block mt-5","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary","d-block","mt-5"],[1,"visually-hidden"],[1,"card","card-lg","mb-5","border"],[1,"card-body","pb-0"],[1,"card","card-sm"],[1,"card-body","bg-light"],[1,"row"],[1,"col-6","col-lg-3"],[1,"heading-xxxs","text-muted"],[1,"mb-lg-0","fs-sm","fw-bold",3,"matTooltip"],[1,"mb-lg-0","fs-sm","fw-bold"],[1,"mb-0","fs-sm","fw-bold"],[1,"mt-3","d-flex","align-items-center"],["type","button",1,"btn","btn-sm","btn-outline-dark",3,"click"],["class","dropdown-menu d-block mt-2","style","position: absolute; z-index: 1000",4,"ngIf"],[1,"card-footer"],[1,"mb-4"],[1,"my-4"],[1,"list-group","list-group-lg","list-group-flush-y","list-group-flush-x"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"card-body"],[1,"list-group","list-group-sm","list-group-flush-y","list-group-flush-x"],[1,"list-group-item","d-flex"],[1,"ms-auto"],[1,"list-group-item","d-flex","fs-lg","fw-bold"],[1,"card","card-lg","border"],[1,"col-12","col-md-4"],[1,"mb-2","fw-bold"],[1,"mb-2","mb-md-0","text-gray-500"],[1,"col-12","col-md-4","d-flex","flex-column","justify-content-between"],[1,"mb-0","text-gray-500"],[1,"dropdown-menu","d-block","mt-2",2,"position","absolute","z-index","1000"],["type","button","class","dropdown-item",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"click"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-4","col-md-3","col-xl-2"],[3,"routerLink"],[1,"img-fluid",3,"src","alt"],[1,"col"],[1,"mb-4","fs-sm","fw-bold"],[1,"text-body","docs-creator",3,"routerLink"],[1,"text-muted"]],template:function(e,s){e&1&&g(0,K,3,0,"div",0)(1,Y,104,33,"ng-container",1),e&2&&(p("ngIf",s.loading),r(),p("ngIf",!s.loading))},dependencies:[A,F,B,N,V,L,q,U,j],styles:[".card[_ngcontent-%COMP%]{background-color:#fff}.border[_ngcontent-%COMP%]{border:1px solid #e5e5e5!important}.card-lg[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .card-lg[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:2rem}.card-body[_ngcontent-%COMP%]{flex:0 0 auto}.card-footer[_ngcontent-%COMP%]{background-color:transparent;border-top:0 solid hsla(0,0%,7%,.125)}hr[_ngcontent-%COMP%]{background-color:currentColor;border:0;color:#909090;margin:1.5rem 0;opacity:.25}hr[_ngcontent-%COMP%]:not([size]){height:1px}.list-group[_ngcontent-%COMP%]{max-height:38rem;overflow-y:auto;overflow-x:hidden;border-radius:0}.list-group-item[_ngcontent-%COMP%]{border:1px solid #e5e5e5;display:block;padding:1.5rem;position:relative}.list-group-item[_ngcontent-%COMP%], .list-group-item-action[_ngcontent-%COMP%]:active{background-color:transparent;color:#1f1f1f}.list-group-item-action[_ngcontent-%COMP%]{color:#767676;text-align:inherit;width:100%}.list-group-flush-x[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-left:none;border-right:none;padding-left:0;padding-right:0}.list-group-item[_ngcontent-%COMP%] + .list-group-item[_ngcontent-%COMP%]{border-top-width:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:first-child{border-top:none;padding-top:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:0;padding-bottom:0}.dropdown-menu[_ngcontent-%COMP%]{border-radius:0}.dropdown-item.active[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]:active, .dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#000}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{color:#000;background-color:#f5f5f5}"]})};export{H as OrderDetailsComponent};
