import{a as h}from"./chunk-C5PUGBON.js";import"./chunk-MV4XN6CR.js";import"./chunk-DTAZCNIX.js";import"./chunk-VWCMHKBA.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import"./chunk-T3Q3DASN.js";import{m as S,n as C,r as U}from"./chunk-SPT54WKC.js";import{Cb as d,Eb as l,Ob as i,Pb as r,Tb as b,Yb as g,_b as m,cb as a,ia as x,kc as s,lb as v,lc as c,ra as u,sa as f}from"./chunk-IB35DNSN.js";function I(t,n){t&1&&(i(0,"h2",4),s(1,"Users List"),r())}function A(t,n){t&1&&(i(0,"div",5)(1,"span",6),s(2,"Loading..."),r()())}function E(t,n){if(t&1){let e=b();i(0,"button",11),g("click",function(){u(e);let p=m().$implicit,_=m(2);return f(_.toggleAdminStatus(p))}),s(1," Make Admin "),r()}}function k(t,n){if(t&1){let e=b();i(0,"button",12),g("click",function(){u(e);let p=m().$implicit,_=m(2);return f(_.toggleAdminStatus(p))}),s(1," Revoke Admin "),r()}}function w(t,n){if(t&1&&(i(0,"tr")(1,"td"),s(2),r(),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),d(8,E,2,0,"button",9)(9,k,2,0,"button",10),r()()),t&2){let e=n.$implicit;a(2),c(e.fullName),a(2),c(e.email),a(2),c(e.isAdmin?"Admin":"User"),a(2),l("ngIf",!e.isAdmin),a(),l("ngIf",e.isAdmin)}}function T(t,n){if(t&1&&(i(0,"table",7)(1,"thead")(2,"tr")(3,"th"),s(4,"Name"),r(),i(5,"th"),s(6,"Email"),r(),i(7,"th"),s(8,"Status"),r(),i(9,"th"),s(10,"Actions"),r()()(),i(11,"tbody"),d(12,w,10,5,"tr",8),r()()),t&2){let e=m();a(12),l("ngForOf",e.users)}}var y=class t{adminService=x(h);users=[];loading=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.adminService.getAllUsers().subscribe({next:n=>{this.users=n,this.loading=!1},error:n=>{console.error("Error fetching users:",n),this.loading=!1}})}toggleAdminStatus(n){let e=!n.isAdmin;this.adminService.updateUserAdminStatus(n._id,e).subscribe({next:o=>{n.isAdmin=o.isAdmin},error:o=>{console.error("Error updating admin status:",o)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-users"]],decls:4,vars:3,consts:[["class","pt-4 mb-4 fs-5",4,"ngIf"],["class","spinner-border text-primary d-block my-5","role","status",4,"ngIf"],[1,"table-responsive"],["class","table",4,"ngIf"],[1,"pt-4","mb-4","fs-5"],["role","status",1,"spinner-border","text-primary","d-block","my-5"],[1,"visually-hidden"],[1,"table"],[4,"ngFor","ngForOf"],["class","btn btn-dark w-100",3,"click",4,"ngIf"],["class","btn btn-outline-secondary w-100",3,"click",4,"ngIf"],[1,"btn","btn-dark","w-100",3,"click"],[1,"btn","btn-outline-secondary","w-100",3,"click"]],template:function(e,o){e&1&&(d(0,I,2,0,"h2",0)(1,A,3,0,"div",1),i(2,"div",2),d(3,T,13,1,"table",3),r()),e&2&&(l("ngIf",!o.loading),a(),l("ngIf",o.loading),a(2),l("ngIf",!o.loading))},dependencies:[U,S,C],styles:["table[_ngcontent-%COMP%]{width:40rem}"]})};export{y as UsersComponent};
