import{b as A,c as D,f as O,g as R,h as U,i as G,j,k as z,o as H,p as J,q as K,r as Q,s as X,t as Y,x as Z}from"./chunk-SMQGBKL2.js";import{a as ee}from"./chunk-JTAS6X7G.js";import{s as L}from"./chunk-7CMIEGEP.js";import{a as te}from"./chunk-SHORG633.js";import{d as N,f as B}from"./chunk-NTBE4NJ6.js";import{a as $}from"./chunk-J32KW7FV.js";import"./chunk-BRGKWRVN.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-MAQY66WU.js";import{m as V,n as W,q as F}from"./chunk-HXLDE4VL.js";import{Bb as c,Db as s,Nb as r,Ob as t,Sb as T,Xb as q,Zb as C,db as a,ia as y,ic as m,jc as l,kc as M,lc as S,mb as k,nc as _,oc as h,pc as v,ra as g,sa as f}from"./chunk-XVGCL5GT.js";function ie(e,i){if(e&1&&(r(0,"div",43),l(1),t()),e&2){let n=C();a(),S(" ",n.successMessage," ")}}function ne(e,i){if(e&1&&(r(0,"div",44),l(1),t()),e&2){let n=C();a(),M(n.errorMessage)}}function oe(e,i){e&1&&(r(0,"small"),l(1,"Product Name is required."),t())}function ae(e,i){e&1&&(r(0,"small"),l(1," Product Name must be at least 3 characters long. "),t())}function de(e,i){if(e&1&&(r(0,"div",45),c(1,oe,2,0,"small",46)(2,ae,2,0,"small",46),t()),e&2){C();let n=m(13);a(),s("ngIf",n.errors==null?null:n.errors.required),a(),s("ngIf",n.errors==null?null:n.errors.minlength)}}function le(e,i){e&1&&(r(0,"small"),l(1," Description is required. "),t())}function se(e,i){e&1&&(r(0,"small"),l(1," Description must be at least 10 characters long. "),t())}function ce(e,i){if(e&1&&(r(0,"div",45),c(1,le,2,0,"small",46)(2,se,2,0,"small",46),t()),e&2){C();let n=m(20);a(),s("ngIf",n.errors==null?null:n.errors.required),a(),s("ngIf",n.errors==null?null:n.errors.minlength)}}function me(e,i){e&1&&(r(0,"small"),l(1,"Price is required."),t())}function pe(e,i){e&1&&(r(0,"small"),l(1,"Price must be greater than 0."),t())}function ue(e,i){if(e&1&&(r(0,"div",45),c(1,me,2,0,"small",46)(2,pe,2,0,"small",46),t()),e&2){C();let n=m(27);a(),s("ngIf",n.errors==null?null:n.errors.required),a(),s("ngIf",n.errors==null?null:n.errors.min)}}function ge(e,i){e&1&&(r(0,"small"),l(1,"Stock is required."),t())}function fe(e,i){e&1&&(r(0,"small"),l(1," Stock must be at least 0 (no negative values). "),t())}function _e(e,i){if(e&1&&(r(0,"div",45),c(1,ge,2,0,"small",46)(2,fe,2,0,"small",46),t()),e&2){C();let n=m(34);a(),s("ngIf",n.errors==null?null:n.errors.required),a(),s("ngIf",n.errors==null?null:n.errors.min)}}function he(e,i){if(e&1&&(r(0,"option",47),l(1),t()),e&2){let n=i.$implicit;s("value",n._id),a(),S(" ",n.name," ")}}function ve(e,i){e&1&&(r(0,"div",45)(1,"small"),l(2,"Category is required."),t()())}function Ce(e,i){e&1&&(r(0,"div",45)(1,"small"),l(2,"Gender is required."),t()())}function ye(e,i){e&1&&(r(0,"small"),l(1,"Brand is required."),t())}function Se(e,i){e&1&&(r(0,"small"),l(1," Brand must be at least 2 characters long. "),t())}function Me(e,i){if(e&1&&(r(0,"div",45),c(1,ye,2,0,"small",46)(2,Se,2,0,"small",46),t()),e&2){C();let n=m(62);a(),s("ngIf",n.errors==null?null:n.errors.required),a(),s("ngIf",n.errors==null?null:n.errors.minlength)}}function be(e,i){e&1&&(r(0,"div",45)(1,"small"),l(2,"At least one image URL is required."),t()())}var re=class e{categoryService=y($);adminService=y(ee);shopService=y(te);snackbar=y(L);route=y(N);router=y(B);isEditMode=!1;productId=null;successMessage="";errorMessage="";formErrors={};product={_id:"",name:"",description:"",price:0,category:{_id:"",name:"",image:""},gender:"",brand:"",stock:0,ratings:0,numReviews:0,images:[],isFeatured:!1};ngOnInit(){this.categoryService.getAllCategories(),this.route.paramMap.subscribe(i=>{this.productId=i.get("id"),this.productId&&(this.isEditMode=!0,this.loadProduct(this.productId))})}loadProduct(i){this.shopService.getProductById(i).subscribe({next:n=>{this.product=n},error:n=>{console.error("Error loading product:",n),this.errorMessage="Failed to load product details.",this.snackbar.error(this.errorMessage)}})}validateForm(){return this.formErrors={},this.product.name.trim()||(this.formErrors.name="Product name is required."),this.product.description.trim()||(this.formErrors.description="Product description is required."),this.product.price<=0&&(this.formErrors.price="Price must be greater than 0."),this.product.stock<0&&(this.formErrors.stock="Stock cannot be negative."),this.product.category._id||(this.formErrors.category="Category is required."),this.product.gender||(this.formErrors.gender="Gender is required."),this.product.brand.trim()||(this.formErrors.brand="Brand is required."),(!this.product.images||!this.product.images.toString().trim())&&(this.formErrors.images="At least one image URL is required."),Object.keys(this.formErrors).length===0}onSubmit(){if(!this.validateForm()){this.errorMessage="Please fix the errors in the form before submitting.",this.snackbar.error(this.errorMessage);return}this.isEditMode?this.onUpdateProduct():this.onCreateProduct()}onCreateProduct(){this.product.images=this.product.images.toString().split(",").map(i=>i.trim()),this.adminService.createProduct(this.product).subscribe({next:i=>{this.successMessage=i.message,this.resetForm(),this.snackbar.success(i.message),this.router.navigate(["/admin/products"])},error:i=>{console.error("Error creating product:",i),this.errorMessage="An error occurred while creating the product.",this.snackbar.error(i.error.message)}})}onUpdateProduct(){this.product.images=this.product.images.toString().split(",").map(i=>i.trim()),this.adminService.updateProduct(this.productId,this.product).subscribe({next:i=>{this.successMessage="Product updated successfully!",this.snackbar.success(i.message),this.router.navigate(["/admin/products"])},error:i=>{console.error("Error updating product:",i),this.errorMessage="An error occurred while updating the product.",this.snackbar.error(i.error.message)}})}resetForm(){this.product={_id:"",name:"",description:"",price:0,category:{_id:"",name:"",image:""},gender:"",brand:"",stock:0,ratings:0,numReviews:0,images:[],isFeatured:!1},this.formErrors={},this.errorMessage=""}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=k({type:e,selectors:[["app-product-create"]],decls:78,vars:23,consts:[["productForm","ngForm"],["name","ngModel"],["description","ngModel"],["price","ngModel"],["stock","ngModel"],["category","ngModel"],["gender","ngModel"],["brand","ngModel"],["images","ngModel"],[1,"col-12","offset-md-1","offset-lg-0"],[1,"mb-4","fs-5"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["novalidate","",3,"ngSubmit"],[1,"row"],[1,"col-12","col-md-6"],[1,"form-group"],["for","productName",1,"form-label"],["id","productName","type","text","placeholder","Enter product name","name","name","required","","minlength","3",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"col-12"],["for","productDescription",1,"form-label"],["id","productDescription","rows","3","placeholder","Enter product description","name","description","required","","minlength","10",1,"form-control",3,"ngModelChange","ngModel"],["for","price",1,"form-label"],["id","price","type","number","placeholder","Enter price","name","price","min","0.01","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","stock",1,"form-label"],["id","stock","type","number","placeholder","Enter stock quantity","name","stock","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","category",1,"form-label"],["id","category","name","category","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","gender",1,"form-label"],["id","gender","name","gender","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Men"],["value","Women"],["value","Unisex"],["for","brand",1,"form-label"],["id","brand","type","text","placeholder","Enter brand","name","brand","required","","minlength","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["id","isFeatured","type","checkbox","name","isFeatured",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isFeatured",1,"form-check-label"],["for","images",1,"form-label"],["id","images","rows","4","placeholder","Enter image URLs separated by commas","name","images","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-dark",3,"disabled"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"],[4,"ngIf"],[3,"value"]],template:function(n,d){if(n&1){let p=T();r(0,"div",9)(1,"h2",10),l(2),t(),c(3,ie,2,1,"div",11)(4,ne,2,1,"div",12),r(5,"form",13,0),q("ngSubmit",function(){return g(p),f(d.onSubmit())}),r(7,"div",14)(8,"div",15)(9,"div",16)(10,"label",17),l(11,"Product Name *"),t(),r(12,"input",18,1),v("ngModelChange",function(o){return g(p),h(d.product.name,o)||(d.product.name=o),f(o)}),t(),c(14,de,3,2,"div",19),t()(),r(15,"div",20)(16,"div",16)(17,"label",21),l(18,"Description *"),t(),r(19,"textarea",22,2),v("ngModelChange",function(o){return g(p),h(d.product.description,o)||(d.product.description=o),f(o)}),t(),c(21,ce,3,2,"div",19),t()(),r(22,"div",15)(23,"div",16)(24,"label",23),l(25,"Price *"),t(),r(26,"input",24,3),v("ngModelChange",function(o){return g(p),h(d.product.price,o)||(d.product.price=o),f(o)}),t(),c(28,ue,3,2,"div",19),t()(),r(29,"div",15)(30,"div",16)(31,"label",25),l(32,"Stock *"),t(),r(33,"input",26,4),v("ngModelChange",function(o){return g(p),h(d.product.stock,o)||(d.product.stock=o),f(o)}),t(),c(35,_e,3,2,"div",19),t()(),r(36,"div",20)(37,"div",16)(38,"label",27),l(39,"Category *"),t(),r(40,"select",28,5),v("ngModelChange",function(o){return g(p),h(d.product.category._id,o)||(d.product.category._id=o),f(o)}),c(42,he,2,2,"option",29),t(),c(43,ve,3,0,"div",19),t()(),r(44,"div",15)(45,"div",16)(46,"label",30),l(47,"Gender *"),t(),r(48,"select",31,6),v("ngModelChange",function(o){return g(p),h(d.product.gender,o)||(d.product.gender=o),f(o)}),r(50,"option",32),l(51,"Men"),t(),r(52,"option",33),l(53,"Women"),t(),r(54,"option",34),l(55,"Unisex"),t()(),c(56,Ce,3,0,"div",19),t()(),r(57,"div",15)(58,"div",16)(59,"label",35),l(60,"Brand *"),t(),r(61,"input",36,7),v("ngModelChange",function(o){return g(p),h(d.product.brand,o)||(d.product.brand=o),f(o)}),t(),c(63,Me,3,2,"div",19),t()(),r(64,"div",20)(65,"div",37)(66,"input",38),v("ngModelChange",function(o){return g(p),h(d.product.isFeatured,o)||(d.product.isFeatured=o),f(o)}),t(),r(67,"label",39),l(68,"Is Featured"),t()()(),r(69,"div",20)(70,"div",16)(71,"label",40),l(72,"Images (Comma Separated URLs) *"),t(),r(73,"textarea",41,8),v("ngModelChange",function(o){return g(p),h(d.product.images,o)||(d.product.images=o),f(o)}),t(),c(75,be,3,0,"div",19),t()()(),r(76,"button",42),l(77),t()()()}if(n&2){let p=m(6),u=m(13),o=m(20),b=m(27),E=m(34),P=m(41),w=m(49),x=m(62),I=m(74);a(2),M(d.isEditMode?"Edit Product":"Create New Product"),a(),s("ngIf",d.successMessage),a(),s("ngIf",d.errorMessage),a(8),_("ngModel",d.product.name),a(2),s("ngIf",u.invalid&&u.touched),a(5),_("ngModel",d.product.description),a(2),s("ngIf",o.invalid&&o.touched),a(5),_("ngModel",d.product.price),a(2),s("ngIf",b.invalid&&b.touched),a(5),_("ngModel",d.product.stock),a(2),s("ngIf",E.invalid&&E.touched),a(5),_("ngModel",d.product.category._id),a(2),s("ngForOf",d.categoryService.categories),a(),s("ngIf",P.invalid&&P.touched),a(5),_("ngModel",d.product.gender),a(8),s("ngIf",w.invalid&&w.touched),a(5),_("ngModel",d.product.brand),a(2),s("ngIf",x.invalid&&x.touched),a(3),_("ngModel",d.product.isFeatured),a(7),_("ngModel",d.product.images),a(2),s("ngIf",I.invalid&&I.touched),a(),s("disabled",p.invalid),a(),S(" ",d.isEditMode?"Update Product":"Create Product"," ")}},dependencies:[F,V,W,Z,j,J,K,D,z,A,H,O,R,X,Y,Q,G,U],encapsulation:2})};export{re as ProductCreateComponent};
