import{a as h}from"./chunk-JTAS6X7G.js";import"./chunk-7CMIEGEP.js";import"./chunk-BRGKWRVN.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-MAQY66WU.js";import{m as S,n as C,q as U}from"./chunk-HXLDE4VL.js";import{Bb as d,Db as l,Nb as i,Ob as r,Sb as b,Xb as g,Zb as m,db as a,ia as x,jc as s,kc as c,mb as v,ra as u,sa as f}from"./chunk-XVGCL5GT.js";function I(t,n){t&1&&(i(0,"h2",3),s(1,"Users List"),r())}function E(t,n){t&1&&(i(0,"div",4)(1,"span",5),s(2,"Loading..."),r()())}function y(t,n){if(t&1){let e=b();i(0,"button",10),g("click",function(){u(e);let p=m().$implicit,_=m(2);return f(_.toggleAdminStatus(p))}),s(1," Make Admin "),r()}}function k(t,n){if(t&1){let e=b();i(0,"button",11),g("click",function(){u(e);let p=m().$implicit,_=m(2);return f(_.toggleAdminStatus(p))}),s(1," Revoke Admin "),r()}}function w(t,n){if(t&1&&(i(0,"tr")(1,"td"),s(2),r(),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),d(8,y,2,0,"button",8)(9,k,2,0,"button",9),r()()),t&2){let e=n.$implicit;a(2),c(e.fullName),a(2),c(e.email),a(2),c(e.isAdmin?"Admin":"User"),a(2),l("ngIf",!e.isAdmin),a(),l("ngIf",e.isAdmin)}}function T(t,n){if(t&1&&(i(0,"table",6)(1,"thead")(2,"tr")(3,"th"),s(4,"Name"),r(),i(5,"th"),s(6,"Email"),r(),i(7,"th"),s(8,"Admin Status"),r(),i(9,"th"),s(10,"Actions"),r()()(),i(11,"tbody"),d(12,w,10,5,"tr",7),r()()),t&2){let e=m();a(12),l("ngForOf",e.users)}}var A=class t{adminService=x(h);users=[];loading=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.adminService.getAllUsers().subscribe({next:n=>{this.users=n,this.loading=!1},error:n=>{console.error("Error fetching users:",n),this.loading=!1}})}toggleAdminStatus(n){let e=!n.isAdmin;this.adminService.updateUserAdminStatus(n._id,e).subscribe({next:o=>{n.isAdmin=o.isAdmin},error:o=>{console.error("Error updating admin status:",o)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-users"]],decls:3,vars:3,consts:[["class","pt-4 mb-4 fs-5",4,"ngIf"],["class","spinner-border text-primary d-block mt-5","role","status",4,"ngIf"],["class","table",4,"ngIf"],[1,"pt-4","mb-4","fs-5"],["role","status",1,"spinner-border","text-primary","d-block","mt-5"],[1,"visually-hidden"],[1,"table"],[4,"ngFor","ngForOf"],["class","btn btn-dark w-100",3,"click",4,"ngIf"],["class","btn btn-outline-secondary w-100",3,"click",4,"ngIf"],[1,"btn","btn-dark","w-100",3,"click"],[1,"btn","btn-outline-secondary","w-100",3,"click"]],template:function(e,o){e&1&&d(0,I,2,0,"h2",0)(1,E,3,0,"div",1)(2,T,13,1,"table",2),e&2&&(l("ngIf",!o.loading),a(),l("ngIf",o.loading),a(),l("ngIf",!o.loading))},dependencies:[U,S,C],encapsulation:2})};export{A as UsersComponent};
