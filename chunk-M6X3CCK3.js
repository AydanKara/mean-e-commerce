import{a as W}from"./chunk-LOZEKEZE.js";import{f as j,g as A,h as U,i as Y,j as z,o as G,p as J,q as H,x as K}from"./chunk-SMQGBKL2.js";import{s as D}from"./chunk-7CMIEGEP.js";import{a as X}from"./chunk-SHORG633.js";import{g as R,i as $}from"./chunk-NTBE4NJ6.js";import"./chunk-BRGKWRVN.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-MAQY66WU.js";import{m as V,n as L,p as B,q as Q}from"./chunk-HXLDE4VL.js";import{Bb as _,Db as p,Nb as i,Ob as n,Pb as v,Sb as M,Xb as b,Zb as m,a as y,ab as O,b as S,bc as P,db as l,ia as u,ic as E,jc as o,kc as d,lc as w,mb as I,nc as F,oc as T,pc as N,ra as g,rc as x,sa as f,uc as C,vc as h,xc as q,z as k}from"./chunk-XVGCL5GT.js";var tt=()=>({standalone:!0}),et=()=>[];function it(a,e){if(a&1&&(i(0,"option",44),o(1),n()),a&2){let t=e.index,r=m().$implicit;p("value",t+1)("disabled",t+1>r.stock),l(),w(" ",t+1," ")}}function nt(a,e){if(a&1){let t=M();i(0,"ul",30)(1,"li",31)(2,"div",32)(3,"div",33)(4,"a",34),v(5,"img",35),n()(),i(6,"div",12)(7,"div",36)(8,"a",37),o(9),n(),i(10,"span",38),o(11),C(12,"currency"),n()(),i(13,"p",39),o(14,"Quantity:"),n(),i(15,"div",40)(16,"select",41),N("ngModelChange",function(c){let s=g(t).$implicit;return T(s.quantity,c)||(s.quantity=c),f(c)}),b("change",function(){let c=g(t).$implicit,s=m(2);return f(s.updateCart(c))}),_(17,it,2,3,"option",42),n(),i(18,"a",43),b("click",function(){let c=g(t).$implicit,s=m(2);return f(s.removeFromCart(c._id))}),o(19," Remove "),n()()()()()()}if(a&2){let t=e.$implicit;l(4),P("routerLink","/product/",t._id,""),l(),p("src",t.images,O)("alt",t.name),l(4),d(t.name),l(2),d(h(12,9,t.price)),l(5),F("ngModel",t.quantity),p("ngModelOptions",x(11,tt)),l(),p("ngForOf",x(12,et).constructor(t.stock||0))}}function ot(a,e){if(a&1&&(i(0,"div",28),_(1,nt,20,13,"ul",29),n()),a&2){let t=m();l(),p("ngForOf",t.cartItems)}}function rt(a,e){a&1&&(i(0,"h4",45),o(1,"Your cart is empty."),n())}var Z=class a{cartService=u(W);shopService=u(X);snackbar=u(D);cartItems=[];totalPrice=0;ngOnInit(){this.loadCartItems()}loadCartItems(){let e=this.cartService.getCart(),t=e.items.map(r=>this.shopService.getProductById(r._id));k(t).subscribe({next:r=>{this.cartItems=e.items.map((c,s)=>S(y({},c),{stock:r[s]?.stock||0})),this.calculateTotalPrice()},error:r=>{console.error("Error fetching stock data:",r)}})}updateCart(e){e.quantity=Number(e.quantity),e.quantity>e.stock?(this.snackbar.error("Quantity exceeds available stock!"),e.quantity=e.stock):(this.cartService.updateQuantity(e._id,e.quantity),this.calculateTotalPrice(),this.snackbar.success(e.name+" quantity updated!"))}updateQuantity(e,t){this.cartService.updateQuantity(e,t),this.ngOnInit()}removeFromCart(e){this.cartService.removeFromCart(e),this.cartItems=this.cartItems.filter(t=>t._id!==e),this.calculateTotalPrice()}calculateTotalPrice(){this.totalPrice=this.cartItems.reduce((e,t)=>e+t.price*t.quantity,0)}clearCart(){this.cartService.clearCart(),this.ngOnInit()}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=I({type:a,selectors:[["app-shopping-cart"]],decls:52,vars:10,consts:[["emptyCart",""],[1,"py-5","my-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"mb-5","text-center"],[1,"col-12","col-md-7"],["class","cart-items",4,"ngIf","ngIfElse"],[1,"row","align-items-end","justify-content-between","mb-5","mb-md-0"],[1,"mb-3","mb-md-0"],["for","cartCouponCode",1,"form-label","fs-sm","fw-bold"],[1,"row","row","gx-5"],[1,"col"],["id","cartCouponCode","type","text","placeholder","Enter coupon code*",1,"form-control","form-control-sm"],[1,"col-auto"],["type","submit",1,"btn","btn-sm","btn-dark"],[1,"col-12","col-md-auto"],[1,"btn","btn-sm","btn-outline-dark"],[1,"col-12","col-md-5","col-lg-4","offset-lg-1","text-center"],[1,"card","mb-3","bg-light"],[1,"card-body"],[1,"list-group","list-group-sm","list-group-flush-y","list-group-flush-x"],[1,"list-group-item","d-flex"],[1,"ms-auto","fs-sm"],[1,"list-group-item","d-flex","fs-lg","fw-bold"],[1,"list-group-item","fs-sm","text-center","text-gray-500"],["routerLink","/checkout",1,"btn","w-100","btn-dark","mb-2",3,"disabled","title"],["routerLink","/shop",1,"link-underline","my-2"],[1,"cart-items"],["class","list-group list-group-lg list-group-flush-x mb-3",4,"ngFor","ngForOf"],[1,"list-group","list-group-lg","list-group-flush-x","mb-3"],[1,"list-group-item"],[1,"row","align-items-center","pe-4"],[1,"col-3"],[1,"docs-creator",3,"routerLink"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","mb-2","fw-bold"],[1,"text-body"],[1,"ms-auto"],[1,"mb-7","fs-sm","text-muted"],[1,"d-flex","align-items-center"],[1,"form-select","form-select-xxs","w-auto",3,"ngModelChange","change","ngModel","ngModelOptions"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"fs-xs","text-gray-400","ms-auto",3,"click"],[3,"value","disabled"],[1,"text-center","mx-5","my-6"]],template:function(t,r){if(t&1&&(i(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),o(5,"Shopping Cart"),n()()(),i(6,"div",3)(7,"div",6),_(8,ot,2,1,"div",7)(9,rt,2,0,"ng-template",null,0,q),i(11,"div",8)(12,"div",6)(13,"form",9)(14,"label",10),o(15," Coupon code: "),n(),i(16,"div",11)(17,"div",12),v(18,"input",13),n(),i(19,"div",14)(20,"button",15),o(21," Apply "),n()()()()(),i(22,"div",16)(23,"button",17),o(24,"Update Cart"),n()()()(),i(25,"div",18)(26,"div",19)(27,"div",20)(28,"ul",21)(29,"li",22)(30,"span"),o(31,"Subtotal"),n(),i(32,"span",23),o(33),C(34,"currency"),n()(),i(35,"li",22)(36,"span"),o(37,"Tax"),n(),i(38,"span",23),o(39,"$00.00"),n()(),i(40,"li",24)(41,"span"),o(42,"Total"),n(),i(43,"span",23),o(44),C(45,"currency"),n()(),i(46,"li",25),o(47," Shipping cost calculated at Checkout * "),n()()()(),i(48,"button",26),o(49," Proceed to Checkout "),n(),i(50,"a",27),o(51," Continue Shopping "),n()()()()()),t&2){let c=E(10);l(8),p("ngIf",r.cartItems.length>0)("ngIfElse",c),l(25),d(h(34,6,r.totalPrice)),l(11),d(h(45,8,r.totalPrice)),l(4),p("disabled",r.cartItems.length===0)("title",r.cartItems.length===0?"Your cart is empty":"")}},dependencies:[Q,V,L,B,$,R,K,z,J,H,G,j,A,Y,U],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.5rem}.cart-items[_ngcontent-%COMP%]{max-height:50rem;overflow-y:auto;overflow-x:hidden}.list-group[_ngcontent-%COMP%]{border-radius:0}.list-group-item[_ngcontent-%COMP%]{border:1px solid #e5e5e5;display:block;padding:1.5rem;position:relative}.list-group-item[_ngcontent-%COMP%], .list-group-item-action[_ngcontent-%COMP%]:active{background-color:transparent;color:#1f1f1f}.list-group-item[_ngcontent-%COMP%] + .list-group-item[_ngcontent-%COMP%]{border-top-width:0}.list-group-sm[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:1.25rem}.list-group-flush-x[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-left:none;border-right:none;padding-left:0;padding-right:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:first-child{border-top:none;padding-top:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:0;padding-bottom:0}.btn-link[_ngcontent-%COMP%]{color:#1f1f1f;font-weight:500}"]})};export{Z as ShoppingCartComponent};
