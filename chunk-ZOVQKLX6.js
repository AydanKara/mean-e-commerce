import{a as u}from"./chunk-T4ITIP7S.js";import{b as p,c}from"./chunk-KMCRH5WO.js";import{_ as h,ca as o,ia as a,k as l}from"./chunk-ODWXDWB7.js";var b=class s{apiUrl=`${u.apiUrl}/users`;http=a(c);wishListSubject=new l([]);wishlist$=this.wishListSubject.asObservable();getWishlist(t){return this.http.get(`${this.apiUrl}/${t}/wishlist`,{withCredentials:!0})}setWishlist(t){this.wishListSubject.next(t)}addToWishlist(t,i){return this.http.post(`${this.apiUrl}/${t}/wishlist`,{productId:i},{withCredentials:!0}).pipe(h(()=>{this.getWishlist(t).subscribe(e=>{let r=e.map(n=>n._id);this.setWishlist(r)})}))}removeFromWishlist(t,i){let e=`${this.apiUrl}/${t}/wishlist`,r=new p("DELETE",e,{productId:i},{withCredentials:!0});return this.http.request(r).pipe(h(()=>{t&&this.getWishlist(t).subscribe(n=>{let m=n.map(w=>w._id);this.setWishlist(m)})}))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})};export{b as a};
