import{a as A}from"./chunk-MWLBEBGE.js";import{g as L,i as D}from"./chunk-BWLJFYGV.js";import{B as G,h as B,i as Q,k as R,m as W,n as j,s as U,t as Y,u as z}from"./chunk-EQ3PTJBT.js";import{e as $}from"./chunk-MV4XN6CR.js";import"./chunk-DTAZCNIX.js";import"./chunk-VWCMHKBA.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import"./chunk-T3Q3DASN.js";import{m as T,n as N,q as V,r as q}from"./chunk-SPT54WKC.js";import{$a as y,Cb as d,Eb as s,Ob as t,Pb as i,Qb as h,Tb as k,Yb as x,_b as m,cb as l,cc as O,ia as b,jc as M,kc as o,lb as S,lc as u,mc as I,oc as E,pc as P,qc as w,ra as g,sa as f,sc as v,vc as _,wc as C,yc as F}from"./chunk-IB35DNSN.js";var J=()=>({standalone:!0}),K=()=>[];function X(r,n){r&1&&(t(0,"div",29)(1,"span",30),o(2,"Loading..."),i()())}function Z(r,n){if(r&1&&(t(0,"option",47),o(1),i()),r&2){let e=n.index,a=m().$implicit;s("value",e+1)("disabled",e+1>a.stock),l(),I(" ",e+1," ")}}function tt(r,n){if(r&1){let e=k();t(0,"ul",33)(1,"li",34)(2,"div",35)(3,"div",36)(4,"a",37),h(5,"img",38),i()(),t(6,"div",13)(7,"div",39)(8,"a",40),o(9),i(),t(10,"span",41),o(11),_(12,"currency"),i()(),t(13,"p",42),o(14,"Quantity:"),i(),t(15,"div",43)(16,"select",44),w("ngModelChange",function(c){let p=g(e).$implicit;return P(p.quantity,c)||(p.quantity=c),f(c)}),x("change",function(){let c=g(e).$implicit,p=m(2);return f(p.updateCart(c))}),d(17,Z,2,3,"option",45),i(),t(18,"a",46),x("click",function(){let c=g(e).$implicit,p=m(2);return f(p.removeFromCart(c._id))}),o(19," Remove "),i()()()()()()}if(r&2){let e=n.$implicit;l(4),O("routerLink","/product/",e._id,""),l(),s("src",e.images,y)("alt",e.name),l(4),u(e.name),l(2),u(C(12,9,e.price)),l(5),E("ngModel",e.quantity),s("ngModelOptions",v(11,J)),l(),s("ngForOf",v(12,K).constructor(e.stock||0))}}function et(r,n){if(r&1&&(t(0,"div",31),d(1,tt,20,13,"ul",32),i()),r&2){let e=m();l(),s("ngForOf",e.cartItems)}}function it(r,n){r&1&&(t(0,"h4",49),o(1," Your cart is empty. "),i())}function nt(r,n){if(r&1&&d(0,it,2,0,"h4",48),r&2){let e=m();s("ngIf",!e.loading)}}var H=class r{cartService=b(A);snackbar=b($);cartItems=[];totalPrice=0;loading=!0;cartSubscription;ngOnInit(){this.subscribeToCart()}subscribeToCart(){this.cartSubscription=this.cartService.getCartObservable().subscribe({next:n=>{this.cartItems=n.items||[],this.totalPrice=n.totalPrice,this.loading=!1},error:()=>{this.snackbar.error("Error loading the cart."),this.loading=!1}})}updateCart(n){n.quantity>n.stock?(this.snackbar.error("Quantity exceeds available stock!"),n.quantity=n.stock):(this.cartService.updateQuantity(n._id,n.quantity),this.snackbar.success(`${n.name} quantity updated!`))}getAvailableQuantities(n){return Array.from({length:n.stock},(e,a)=>a+1)}removeFromCart(n){this.cartService.removeFromCart(n),this.snackbar.success("Item removed from the cart!")}clearCart(){this.cartService.clearCart(),this.snackbar.success("Cart cleared!")}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-shopping-cart"]],decls:53,vars:11,consts:[["emptyCart",""],[1,"py-5","my-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"mb-5","text-center"],[1,"col-12","col-md-7"],["class","spinner-border text-primary d-block mx-auto my-6","role","status",4,"ngIf"],["class","cart-items",4,"ngIf","ngIfElse"],[1,"row","align-items-end","justify-content-between","mb-5","mb-md-0"],[1,"col-12","col-lg-7"],[1,"mb-3","mb-lg-0"],["for","cartCouponCode",1,"form-label","fs-sm","fw-bold"],[1,"col"],["id","cartCouponCode","type","text","placeholder","Enter coupon code*",1,"form-control","form-control-sm"],[1,"col-auto"],["type","submit",1,"btn","btn-sm","btn-dark"],[1,"col-12","col-md-auto"],[1,"btn","btn-sm","btn-outline-dark"],[1,"col-12","col-md-5","col-lg-4","offset-lg-1","text-center"],[1,"card","mb-3","bg-light"],[1,"card-body"],[1,"list-group","list-group-sm","list-group-flush-y","list-group-flush-x"],[1,"list-group-item","d-flex"],[1,"ms-auto","fs-sm"],[1,"list-group-item","d-flex","fs-lg","fw-bold"],[1,"list-group-item","fs-sm","text-center","text-gray-500"],["routerLink","/checkout",1,"btn","w-100","btn-dark","mb-2",3,"disabled","title"],["routerLink","/shop",1,"link-underline","my-2"],["role","status",1,"spinner-border","text-primary","d-block","mx-auto","my-6"],[1,"visually-hidden"],[1,"cart-items"],["class","list-group list-group-lg list-group-flush-x mb-3",4,"ngFor","ngForOf"],[1,"list-group","list-group-lg","list-group-flush-x","mb-3"],[1,"list-group-item"],[1,"row","align-items-center","pe-sm-4","pe-0"],[1,"col-sm-3","col-4"],[1,"docs-creator",3,"routerLink"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","mb-2","fw-bold"],[1,"text-body"],[1,"ms-auto"],[1,"mb-7","fs-sm","text-muted"],[1,"d-flex","align-items-center"],[1,"form-select","form-select-xxs","w-auto",3,"ngModelChange","change","ngModel","ngModelOptions"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"fs-xs","text-gray-400","ms-auto",3,"click"],[3,"value","disabled"],["class","text-center mx-5 my-6",4,"ngIf"],[1,"text-center","mx-5","my-6"]],template:function(e,a){if(e&1&&(t(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),o(5,"Shopping Cart"),i()()(),t(6,"div",3)(7,"div",6),d(8,X,3,0,"div",7)(9,et,2,1,"div",8)(10,nt,1,1,"ng-template",null,0,F),t(12,"div",9)(13,"div",10)(14,"form",11)(15,"label",12),o(16," Coupon code: "),i(),t(17,"div",3)(18,"div",13),h(19,"input",14),i(),t(20,"div",15)(21,"button",16),o(22," Apply "),i()()()()(),t(23,"div",17)(24,"button",18),o(25,"Update Cart"),i()()()(),t(26,"div",19)(27,"div",20)(28,"div",21)(29,"ul",22)(30,"li",23)(31,"span"),o(32,"Subtotal"),i(),t(33,"span",24),o(34),_(35,"currency"),i()(),t(36,"li",23)(37,"span"),o(38,"Tax"),i(),t(39,"span",24),o(40,"$00.00"),i()(),t(41,"li",25)(42,"span"),o(43,"Total"),i(),t(44,"span",24),o(45),_(46,"currency"),i()(),t(47,"li",26),o(48," Shipping cost calculated at Checkout * "),i()()()(),t(49,"button",27),o(50," Proceed to Checkout "),i(),t(51,"a",28),o(52," Continue Shopping "),i()()()()()),e&2){let c=M(11);l(8),s("ngIf",a.loading),l(),s("ngIf",a.cartItems.length>0&&!a.loading)("ngIfElse",c),l(25),u(C(35,7,a.totalPrice)),l(11),u(C(46,9,a.totalPrice)),l(4),s("disabled",a.cartItems.length===0)("title",a.cartItems.length===0?"Your cart is empty":"")}},dependencies:[q,T,N,V,D,L,G,j,Y,z,U,B,Q,W,R],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.5rem}.cart-items[_ngcontent-%COMP%]{max-height:50rem;overflow-y:auto;overflow-x:hidden}.list-group[_ngcontent-%COMP%]{border-radius:0}.list-group-item[_ngcontent-%COMP%]{border:1px solid #e5e5e5;display:block;padding:1.5rem;position:relative}.list-group-item[_ngcontent-%COMP%], .list-group-item-action[_ngcontent-%COMP%]:active{background-color:transparent;color:#1f1f1f}.list-group-item[_ngcontent-%COMP%] + .list-group-item[_ngcontent-%COMP%]{border-top-width:0}.list-group-sm[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:1.25rem}.list-group-flush-x[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-left:none;border-right:none;padding-left:0;padding-right:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:first-child{border-top:none;padding-top:0}.list-group-flush-y[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:0;padding-bottom:0}.btn-link[_ngcontent-%COMP%]{color:#1f1f1f;font-weight:500}"]})};export{H as ShoppingCartComponent};
