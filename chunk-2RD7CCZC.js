import{a as A}from"./chunk-DIACHD42.js";import{a as q}from"./chunk-XGTUFWUD.js";import{k as j}from"./chunk-5AZEI77Y.js";import"./chunk-WQWQOTRU.js";import"./chunk-6LCJOVVU.js";import{a as F}from"./chunk-GQBWTHKC.js";import{g as T,i as z}from"./chunk-BWLJFYGV.js";import"./chunk-EQ3PTJBT.js";import{a as V}from"./chunk-C5PUGBON.js";import{d as B}from"./chunk-MV4XN6CR.js";import"./chunk-DTAZCNIX.js";import"./chunk-VWCMHKBA.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import"./chunk-T3Q3DASN.js";import{n as I,q as E,r as L}from"./chunk-SPT54WKC.js";import{$a as v,Cb as f,Eb as s,Mb as M,Nb as k,Ob as r,Pb as i,Qb as P,Tb as _,Yb as b,_b as d,bc as h,cb as a,cc as x,ia as m,kc as o,lb as y,lc as C,ra as u,sa as g,sc as O,vc as w,wc as S}from"./chunk-IB35DNSN.js";var N=(n,e)=>e._id,$=()=>[5,10,20,30];function Q(n,e){n&1&&(r(0,"div",4)(1,"span",5),o(2,"Loading..."),i()())}function R(n,e){if(n&1){let t=_();r(0,"div",6)(1,"div",7)(2,"a",8),o(3,"Add Product"),i(),r(4,"mat-paginator",9),b("page",function(p){u(t);let l=d();return g(l.handlePageEvent(p))}),i()()()}if(n&2){let t=d();a(4),s("length",t.totalProducts)("pageSize",t.queryParams.limit)("showFirstLastButtons",!0)("pageSizeOptions",O(5,$))("pageIndex",t.currentPage-1)}}function U(n,e){if(n&1){let t=_();r(0,"div",3)(1,"div",11)(2,"div",12)(3,"button",13),b("click",function(){u(t);let p=d().$implicit,l=d();return g(l.deleteProduct(p._id))}),r(4,"span",14)(5,"mat-icon"),o(6,"close"),i()()(),r(7,"a",15)(8,"span",14)(9,"mat-icon"),o(10,"visibility"),i()(),o(11," Quick View "),i(),r(12,"a",16)(13,"span",14)(14,"mat-icon"),o(15,"edit"),i()(),o(16," Edit product "),i(),P(17,"img",17),i(),r(18,"div",18)(19,"a",19),o(20),i(),P(21,"br"),r(22,"span",20),o(23),w(24,"currency"),i()()()()}if(n&2){let t=d().$implicit;a(7),x("routerLink","/product/",t._id,""),a(5),x("routerLink","/admin/products/edit/",t._id,""),a(5),h("src",t.images[0],v),h("alt",t.name),a(3),C(t.name),a(3),C(S(24,8,t.price))}}function G(n,e){if(n&1&&f(0,U,25,10,"div",10),n&2){let t=d();s("ngIf",!t.loading)}}var D=class n{shopService=m(q);adminService=m(V);snackBar=m(B);products=[];totalProducts=0;currentPage=1;totalPages=1;queryParams=new A;loading=!1;ngOnInit(){this.getProducts()}getProducts(){this.loading=!0,this.shopService.getAllProducts(this.queryParams).subscribe({next:e=>{this.products=e.products,this.currentPage=e.currentPage,this.totalPages=e.totalPages,this.totalProducts=e.totalProducts,this.loading=!1},error:e=>{this.loading=!1,console.log(e)}})}handlePageEvent(e){this.queryParams.page=e.pageIndex+1,this.queryParams.limit=e.pageSize,this.getProducts()}deleteProduct(e){confirm("Are you sure you want to delete this product?")&&this.adminService.deleteProduct(e).subscribe({next:t=>{this.snackBar.open("Product deleted successfully","Close",{duration:2e3}),this.products=this.products.filter(c=>c._id!==e),this.getProducts()},error:t=>{console.error("Error deleting product",t),this.snackBar.open("Error deleting product","Close",{duration:2e3})}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-products"]],decls:5,vars:2,consts:[["class","spinner-border text-primary d-block mt-5","role","status",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-6","col-md-4"],["role","status",1,"spinner-border","text-primary","d-block","mt-5"],[1,"visually-hidden"],[1,"row"],[1,"col-12","d-flex","justify-content-between","align-items-center"],["routerLink","/admin/product/create",1,"link-underline"],["aria-label","Select page",1,"paginator","border-2",3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["class","col-6 col-md-4",4,"ngIf"],[1,"card","mb-4"],[1,"card-img"],[1,"btn","btn-xs","btn-circle","btn-white-primary","card-action","card-action-end",3,"click"],[1,"material-symbols-outlined"],[1,"btn","btn-xs","w-100","btn-dark","card-btn",3,"routerLink"],[1,"btn","btn-xs","w-100","btn-dark","card-btn","edit-btn",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","fw-bold","text-center"],["routerLink","/products",1,"text-body"],[1,"text-muted"]],template:function(t,c){t&1&&(f(0,Q,3,0,"div",0)(1,R,5,6,"div",1),r(2,"div",2),M(3,G,1,1,"div",3,N),i()),t&2&&(s("ngIf",c.loading),a(),s("ngIf",!c.loading),a(2),k(c.products))},dependencies:[L,I,E,z,T,F,j],styles:[".card-img[_ngcontent-%COMP%]{position:relative;cursor:pointer;height:22rem}.card-img-top[_ngcontent-%COMP%]{height:100%;object-fit:cover}.btn-white-primary[_ngcontent-%COMP%]{background-color:#fff;color:#1f1f1f}.btn-circle[_ngcontent-%COMP%]{align-items:center;border-radius:50%!important;display:inline-flex;justify-content:center;padding:0;width:calc(3.25rem + 2px)}.btn-xs[_ngcontent-%COMP%]{height:calc(2.40625rem + 2px)!important;padding:.5rem .75rem}.btn-circle.btn-xs[_ngcontent-%COMP%]{width:calc(2.40625rem + 2px)}.card-action[_ngcontent-%COMP%]{position:absolute;top:1.25rem;z-index:1}.edit-btn[_ngcontent-%COMP%]{border:0;bottom:2.5rem!important}.card-action-end[_ngcontent-%COMP%]{right:1.25rem}.mat-icon[_ngcontent-%COMP%]{height:19px!important}.btn-white-primary[_ngcontent-%COMP%]:focus, .btn-white-primary[_ngcontent-%COMP%]:hover{background-color:#ff6f61;border-color:#ff6f61;color:#fff}.card-btn[_ngcontent-%COMP%]{bottom:0;left:0;opacity:0;position:absolute;transition:opacity .2s ease-in-out}.card-img[_ngcontent-%COMP%]:hover   .card-btn[_ngcontent-%COMP%]{opacity:1}.btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#1c1c1c;border-color:#1c1c1c;color:#fff}.btn-check[_ngcontent-%COMP%]:focus + .btn-dark[_ngcontent-%COMP%], .btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#fff;border-color:#fff;color:#1a1a1a}@media (max-width: 1399px){.card-img[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 1199px){.card-img[_ngcontent-%COMP%]{height:17rem}}@media (max-width: 990px){.card-img[_ngcontent-%COMP%]{height:13rem}}@media (max-width: 768px){.card-img[_ngcontent-%COMP%]{height:20.5rem}}"]})};export{D as ProductsComponent};
