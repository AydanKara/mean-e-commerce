import{a as j}from"./chunk-DIACHD42.js";import{a as A}from"./chunk-XGTUFWUD.js";import{k as V}from"./chunk-5AZEI77Y.js";import"./chunk-WQWQOTRU.js";import"./chunk-6LCJOVVU.js";import{a as F}from"./chunk-GQBWTHKC.js";import{g as T,i as z}from"./chunk-BWLJFYGV.js";import"./chunk-EQ3PTJBT.js";import{a as q}from"./chunk-C5PUGBON.js";import{d as B}from"./chunk-MV4XN6CR.js";import"./chunk-DTAZCNIX.js";import"./chunk-VWCMHKBA.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import"./chunk-T3Q3DASN.js";import{n as I,q as E,r as L}from"./chunk-SPT54WKC.js";import{$a as C,Cb as p,Eb as d,Mb as y,Nb as M,Ob as r,Pb as i,Qb as u,Tb as O,Yb as g,_b as s,bc as f,cb as c,cc as P,ia as m,kc as a,lb as v,lc as h,ra as _,sa as x,sc as k,vc as w,wc as S}from"./chunk-IB35DNSN.js";var N=(n,t)=>t._id,$=()=>[5,10,20,30];function Q(n,t){n&1&&(r(0,"div",5)(1,"span",6),a(2,"Loading..."),i()())}function R(n,t){n&1&&(r(0,"div",7)(1,"div",8)(2,"a",9),a(3,"Add Product"),i()()())}function U(n,t){if(n&1){let e=O();r(0,"div",3)(1,"div",11)(2,"div",12)(3,"button",13),g("click",function(){_(e);let b=s().$implicit,l=s();return x(l.deleteProduct(b._id))}),r(4,"span",14)(5,"mat-icon"),a(6,"close"),i()()(),r(7,"a",15)(8,"span",14)(9,"mat-icon"),a(10,"visibility"),i()(),a(11," Quick View "),i(),r(12,"a",16)(13,"span",14)(14,"mat-icon"),a(15,"edit"),i()(),a(16," Edit product "),i(),u(17,"img",17),i(),r(18,"div",18)(19,"a",19),a(20),i(),u(21,"br"),r(22,"span",20),a(23),w(24,"currency"),i()()()()}if(n&2){let e=s().$implicit;c(7),P("routerLink","/product/",e._id,""),c(5),P("routerLink","/admin/products/edit/",e._id,""),c(5),f("src",e.images[0],C),f("alt",e.name),c(3),h(e.name),c(3),h(S(24,8,e.price))}}function G(n,t){if(n&1&&p(0,U,25,10,"div",10),n&2){let e=s();d("ngIf",!e.loading)}}var D=class n{shopService=m(A);adminService=m(q);snackBar=m(B);products=[];totalProducts=0;currentPage=1;totalPages=1;queryParams=new j;loading=!1;ngOnInit(){this.getProducts()}getProducts(){this.loading=!0,this.shopService.getAllProducts(this.queryParams).subscribe({next:t=>{this.products=t.products,this.currentPage=t.currentPage,this.totalPages=t.totalPages,this.totalProducts=t.totalProducts,this.loading=!1},error:t=>{this.loading=!1,console.log(t)}})}handlePageEvent(t){this.queryParams.page=t.pageIndex+1,this.queryParams.limit=t.pageSize,this.getProducts()}deleteProduct(t){confirm("Are you sure you want to delete this product?")&&this.adminService.deleteProduct(t).subscribe({next:e=>{this.snackBar.open("Product deleted successfully","Close",{duration:2e3}),this.products=this.products.filter(o=>o._id!==t),this.getProducts()},error:e=>{console.error("Error deleting product",e),this.snackBar.open("Error deleting product","Close",{duration:2e3})}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-products"]],decls:6,vars:8,consts:[["class","spinner-border text-primary d-block my-5","role","status",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-12","col-sm-6","col-md-4"],["aria-label","Select page",1,"paginator","border-2",3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["role","status",1,"spinner-border","text-primary","d-block","my-5"],[1,"visually-hidden"],[1,"row"],[1,"col-12","d-flex","align-items-center","flex-sm-row","flex-column"],["routerLink","/admin/product/create",1,"link-underline"],["class","col-12 col-sm-6 col-md-4",4,"ngIf"],[1,"card","mb-4"],[1,"card-img"],[1,"btn","btn-xs","btn-circle","btn-white-primary","card-action","card-action-end",3,"click"],[1,"material-symbols-outlined"],[1,"btn","btn-xs","w-100","btn-dark","card-btn",3,"routerLink"],[1,"btn","btn-xs","w-100","btn-dark","card-btn","edit-btn",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","fw-bold","text-center"],["routerLink","/products",1,"text-body"],[1,"text-muted"]],template:function(e,o){e&1&&(p(0,Q,3,0,"div",0)(1,R,4,0,"div",1),r(2,"div",2),y(3,G,1,1,"div",3,N),i(),r(5,"mat-paginator",4),g("page",function(l){return o.handlePageEvent(l)}),i()),e&2&&(d("ngIf",o.loading),c(),d("ngIf",!o.loading),c(2),M(o.products),c(2),d("length",o.totalProducts)("pageSize",o.queryParams.limit)("showFirstLastButtons",!0)("pageSizeOptions",k(7,$))("pageIndex",o.currentPage-1))},dependencies:[L,I,E,z,T,F,V],styles:[".card-img[_ngcontent-%COMP%]{position:relative;cursor:pointer;height:22rem}.card-img-top[_ngcontent-%COMP%]{height:100%;object-fit:cover}.btn-white-primary[_ngcontent-%COMP%]{background-color:#fff;color:#1f1f1f}.btn-circle[_ngcontent-%COMP%]{align-items:center;border-radius:50%!important;display:inline-flex;justify-content:center;padding:0;width:calc(3.25rem + 2px)}.btn-xs[_ngcontent-%COMP%]{height:calc(2.40625rem + 2px)!important;padding:.5rem .75rem}.btn-circle.btn-xs[_ngcontent-%COMP%]{width:calc(2.40625rem + 2px)}.card-action[_ngcontent-%COMP%]{position:absolute;top:1.25rem;z-index:1}.edit-btn[_ngcontent-%COMP%]{border:0;bottom:2.5rem!important}.card-action-end[_ngcontent-%COMP%]{right:1.25rem}.mat-icon[_ngcontent-%COMP%]{height:19px!important}.btn-white-primary[_ngcontent-%COMP%]:focus, .btn-white-primary[_ngcontent-%COMP%]:hover{background-color:#ff6f61;border-color:#ff6f61;color:#fff}.card-btn[_ngcontent-%COMP%]{bottom:0;left:0;opacity:0;position:absolute;transition:opacity .2s ease-in-out}.card-img[_ngcontent-%COMP%]:hover   .card-btn[_ngcontent-%COMP%]{opacity:1}.btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#1c1c1c;border-color:#1c1c1c;color:#fff}.btn-check[_ngcontent-%COMP%]:focus + .btn-dark[_ngcontent-%COMP%], .btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#fff;border-color:#fff;color:#1a1a1a}@media (max-width: 1399px){.card-img[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 1199px){.card-img[_ngcontent-%COMP%]{height:17rem}}@media (max-width: 990px){.card-img[_ngcontent-%COMP%]{height:13rem}}@media (max-width: 767.9px){.card-img[_ngcontent-%COMP%]{height:20.5rem}}@media (max-width: 576px){.card-img[_ngcontent-%COMP%]{height:25.5rem}}@media (max-width: 375px){.card-img[_ngcontent-%COMP%]{height:20.5rem}}"]})};export{D as ProductsComponent};
