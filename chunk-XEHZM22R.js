import{a as L}from"./chunk-YG2UHIQ6.js";import{a as F}from"./chunk-X7KAA5KW.js";import"./chunk-VE74UDV5.js";import"./chunk-GQBWTHKC.js";import{d as _,f as y}from"./chunk-BWLJFYGV.js";import{A as N,C as A,c as x,e as p,h as I,i as M,n as w,q as E,r as P,w as R}from"./chunk-EQ3PTJBT.js";import"./chunk-JR3KB4OF.js";import"./chunk-VWCMHKBA.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-QKMSTV2X.js";import{n as S,r as C}from"./chunk-SPT54WKC.js";import{Cb as g,Eb as d,Ob as i,Pb as e,Qb as c,Yb as v,_b as b,cb as m,db as s,kc as o,lb as f,mc as h}from"./chunk-IB35DNSN.js";function U(r,t){r&1&&(i(0,"div",20),o(1," Please enter a valid email. "),e())}function k(r,t){r&1&&(i(0,"div",20),o(1," Password must be at least 6 characters. "),e())}function q(r,t){if(r&1&&(i(0,"div",21),o(1),e()),r&2){let a=b();m(),h(" ",a.errorMessage," ")}}var O=class r{constructor(t,a,n,l){this.fb=t;this.userService=a;this.router=n;this.route=l;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}loginForm;errorMessage="";returnUrl="";ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){this.loginForm.invalid||this.userService.login(this.loginForm.value).subscribe({next:t=>{t.isAdmin?(this.userService.setAuthState(t),this.router.navigate(["/admin/dashboard"])):(this.userService.setAuthState(t),this.router.navigateByUrl(this.returnUrl,{replaceUrl:!0}))},error:t=>this.errorMessage=t.error.message||"Login failed"})}static \u0275fac=function(a){return new(a||r)(s(N),s(F),s(y),s(_))};static \u0275cmp=f({type:r,selectors:[["app-login"]],decls:33,vars:5,consts:[[1,"my-5","py-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"card","card-lg","mb-5","mb-md-0"],[1,"card-body"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"visually-hidden"],["id","email","type","email","placeholder","Email Address *","required","","formControlName","email",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","password",1,"visually-hidden"],["id","password","type","password","placeholder","Password *","required","","formControlName","password",1,"form-control","form-control-sm"],[1,"col-12","col-md"],[1,"form-check"],["id","loginRemember","type","checkbox",1,"form-check-input"],["for","loginRemember",1,"form-check-label"],["type","submit",1,"btn","btn-sm","btn-dark",3,"disabled"],["class","text-danger mt-3",4,"ngIf"],[1,"text-danger"],[1,"text-danger","mt-3"]],template:function(a,n){if(a&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h6",6),o(7,"Returning Customer"),e(),i(8,"form",7),v("ngSubmit",function(){return n.onSubmit()}),i(9,"div",2)(10,"div",3)(11,"div",8)(12,"label",9),o(13," Email Address * "),e(),c(14,"input",10),g(15,U,2,0,"div",11),e()(),i(16,"div",3)(17,"div",8)(18,"label",12),o(19," Password * "),e(),c(20,"input",13),g(21,k,2,0,"div",11),e()(),i(22,"div",14)(23,"div",8)(24,"div",15),c(25,"input",16),i(26,"label",17),o(27," Remember me "),e()()()(),i(28,"div",3)(29,"button",18),o(30," Sign In "),e()(),g(31,q,2,1,"div",19),e()()()()()()()(),c(32,"app-features")),a&2){let l,u;m(8),d("formGroup",n.loginForm),m(7),d("ngIf",((l=n.loginForm.get("email"))==null?null:l.touched)&&((l=n.loginForm.get("email"))==null?null:l.invalid)),m(6),d("ngIf",((u=n.loginForm.get("password"))==null?null:u.touched)&&((u=n.loginForm.get("password"))==null?null:u.invalid)),m(8),d("disabled",n.loginForm.invalid),m(2),d("ngIf",n.errorMessage)}},dependencies:[C,S,A,w,x,I,M,R,E,P,L],styles:[".card[_ngcontent-%COMP%]{background-color:#f5f5f5;margin:0 auto;max-width:36rem;justify-content:center;align-items:center}.card-lg[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .card-lg[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:2rem}.card-body[_ngcontent-%COMP%]{flex:0 0 auto}"]})};export{O as LoginComponent};
