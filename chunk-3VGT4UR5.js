import{a as V}from"./chunk-72J42I7T.js";import{a as j}from"./chunk-7MDGCOW6.js";import{s as T}from"./chunk-CPN2JVP4.js";import{a as N,b as U}from"./chunk-44JXFXPC.js";import{g as A,i as L}from"./chunk-OM67MVYA.js";import"./chunk-RM2HLJRT.js";import"./chunk-T3Q3DASN.js";import"./chunk-T4ITIP7S.js";import"./chunk-BLI2WIQU.js";import{m as P,n as W,q as E,r as F}from"./chunk-RRDE5Q37.js";import{$b as d,Db as m,Fb as a,Pb as r,Qb as n,Rb as h,Sb as x,Tb as C,Ub as w,Zb as y,ab as b,cc as f,db as s,dc as I,eb as l,kc as M,lc as o,mb as v,mc as g,ra as u,sa as _,wc as k,xc as O,zc as S}from"./chunk-A5AGJRWB.js";function z(e,i){e&1&&(r(0,"div",4)(1,"span",5),o(2,"Loading..."),n()())}function $(e,i){if(e&1){let t=w();r(0,"div",7)(1,"div",8)(2,"div",9)(3,"button",10),y("click",function(){let p=u(t).$implicit,R=d(2);return _(R.removeFromWishlist(p._id))}),r(4,"span",11)(5,"mat-icon"),o(6,"close"),n()()(),r(7,"a",12)(8,"span",11)(9,"mat-icon"),o(10,"visibility"),n()(),o(11," Quick View "),n(),h(12,"img",13),n(),r(13,"div",14)(14,"a",15),o(15),n(),h(16,"br"),r(17,"span",16),o(18),k(19,"currency"),n()()()()}if(e&2){let t=i.$implicit;s(7),I("routerLink","/product/",t._id,""),s(5),f("src",t.images[0],b),f("alt",t.name),s(2),a("routerLink","/product/"+t._id),s(),g(t.name),s(3),g(O(19,7,t.price))}}function B(e,i){if(e&1&&(x(0),m(1,$,20,9,"div",6),C()),e&2){let t=d();s(),a("ngForOf",t.wishlist)}}function Q(e,i){e&1&&(r(0,"div",18)(1,"h4"),o(2,"No favorites yet!"),n(),r(3,"p",16),o(4,"You haven't added any products to your wishlist."),n(),r(5,"a",19),o(6,"Start Shopping"),n()())}function Y(e,i){if(e&1&&m(0,Q,7,0,"div",17),e&2){let t=d();a("ngIf",!t.loading)}}var D=class e{constructor(i,t,c){this.wishlistService=i;this.userService=t;this.snackbar=c}wishlist=[];userId=null;loading=!1;ngOnInit(){this.userId=this.userService.getUserId(),this.userId&&this.fetchWishlist()}fetchWishlist(){this.loading=!0,this.userId&&this.wishlistService.getWishlist(this.userId).subscribe({next:i=>{this.loading=!1,this.wishlist=i},error:i=>{this.loading=!1,console.error("Error fetching wishlist:",i),this.snackbar.error("Failed to load wishlist.")}})}removeFromWishlist(i){this.userId&&this.wishlistService.removeFromWishlist(this.userId,i).subscribe({next:()=>{this.wishlist=this.wishlist.filter(c=>c._id!==i);let t=this.wishlist.map(c=>c._id);this.wishlistService.setWishlist(t),this.snackbar.success("Item removed from wishlist!")},error:t=>{this.snackbar.error("Failed to remove item from wishlist.")}})}static \u0275fac=function(t){return new(t||e)(l(V),l(j),l(T))};static \u0275cmp=v({type:e,selectors:[["app-account-wishlist"]],decls:5,vars:3,consts:[["noFavorites",""],[1,"row","my-4"],["class","spinner-border text-primary d-block mt-5","role","status",4,"ngIf"],[4,"ngIf","ngIfElse"],["role","status",1,"spinner-border","text-primary","d-block","mt-5"],[1,"visually-hidden"],["class","col-6 col-md-4",4,"ngFor","ngForOf"],[1,"col-6","col-md-4"],[1,"card","mb-4"],[1,"card-img"],[1,"btn","btn-xs","btn-circle","btn-white-primary","card-action","card-action-end",3,"click"],[1,"material-symbols-outlined"],[1,"btn","btn-xs","w-100","btn-dark","card-btn",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","fw-bold","text-center"],[1,"text-body",3,"routerLink"],[1,"text-muted"],["class","text-start mt-5",4,"ngIf"],[1,"text-start","mt-5"],["routerLink","/shop",1,"btn","btn-sm","btn-outline-dark"]],template:function(t,c){if(t&1&&(r(0,"div",1),m(1,z,3,0,"div",2)(2,B,2,1,"ng-container",3)(3,Y,1,1,"ng-template",null,0,S),n()),t&2){let p=M(4);s(),a("ngIf",c.loading),s(),a("ngIf",c.wishlist.length>0&&!c.loading)("ngIfElse",p)}},dependencies:[F,P,W,E,L,A,U,N],styles:[".card-img[_ngcontent-%COMP%]{position:relative;cursor:pointer;height:22rem}.card-img-top[_ngcontent-%COMP%]{height:100%;object-fit:cover}.btn-white-primary[_ngcontent-%COMP%]{background-color:#fff;color:#1f1f1f}.btn-circle[_ngcontent-%COMP%]{align-items:center;border-radius:50%!important;display:inline-flex;justify-content:center;padding:0;width:calc(3.25rem + 2px)}.btn-xs[_ngcontent-%COMP%]{height:calc(2.40625rem + 2px)!important;padding:.5rem .75rem}.btn-circle.btn-xs[_ngcontent-%COMP%]{width:calc(2.40625rem + 2px)}.card-action[_ngcontent-%COMP%]{position:absolute;top:1.25rem;z-index:1}.edit-btn[_ngcontent-%COMP%]{border:0;bottom:2.5rem!important}.card-action-end[_ngcontent-%COMP%]{right:1.25rem}.mat-icon[_ngcontent-%COMP%]{height:19px!important}.btn-white-primary[_ngcontent-%COMP%]:focus, .btn-white-primary[_ngcontent-%COMP%]:hover{background-color:#ff6f61;border-color:#ff6f61;color:#fff}.card-btn[_ngcontent-%COMP%]{bottom:0;left:0;opacity:0;position:absolute;transition:opacity .2s ease-in-out}.card-img[_ngcontent-%COMP%]:hover   .card-btn[_ngcontent-%COMP%]{opacity:1}.btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#1c1c1c;border-color:#1c1c1c;color:#fff}.btn-check[_ngcontent-%COMP%]:focus + .btn-dark[_ngcontent-%COMP%], .btn-dark[_ngcontent-%COMP%]:focus, .btn-dark[_ngcontent-%COMP%]:hover{background-color:#fff;border-color:#fff;color:#1a1a1a}@media (max-width: 1399px){.card-img[_ngcontent-%COMP%]{height:20rem}}@media (max-width: 1199px){.card-img[_ngcontent-%COMP%]{height:17rem}}@media (max-width: 990px){.card-img[_ngcontent-%COMP%]{height:13rem}}@media (max-width: 768px){.card-img[_ngcontent-%COMP%]{height:20.5rem}}"]})};export{D as AccountWishlistComponent};
